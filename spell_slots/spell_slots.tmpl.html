<div class="panel panel-default">
  <div class="panel-heading">
	  <h2 class="panel-title">Spell Slots</h2>
  </div>
  <div class='panel-body'>
    <div class="progress" data-bind="{ foreach: slots, visible: slots().length > 0 }">
      <div class="progress-bar" role="progressbar" aria-valuemin="0"
        data-bind="style: { width: progressWidth() * $parent.maxSlotWidth() + '%' }, css: color,
          text: progressWidth() > 0 ? progressLabel : ''">
        <span class="sr-only"></span>
      </div>
    </div>
      <table id='spellSlotsTable' class="table table-responsive table-ac-bordered table-hover">
        <thead>
          <tr>
            <th data-bind="click: sortBy('level')">
              Level
              <span data-bind="css: sortArrow('level')"></span>
            </th>
            <th class="hidden-sm hidden-xs" data-bind="click: sortBy('maxSpellSlots')">
              Max
              <span data-bind="css: sortArrow('maxSpellSlots')"></span>
            </th>
            <th data-bind="click: sortBy('usedSpellSlots')">
              Used
              <span data-bind="css: sortArrow('usedSpellSlots')"></span>
            </th>
            <th>Color</th>
            <th><!-- Edit btn --></th>
            <th>
             <a data-toggle="modal"
                data-target="#addSpellSlot" href="#">
               <i class="glyphicon glyphicon-plus"></i>
             </a>
           </th>
          </tr>
        </thead>
        <tbody data-bind="foreach: filteredAndSortedSlots">
          <tr>
            <td data-bind="text: level"></td>
            <td class="hidden-sm hidden-xs" data-bind="text: maxSpellSlots"></td>
            <td>
              <div class="input-group">
                <span class="input-group-btn">
                  <button class="btn btn-danger" data-bind="click: incrUsed">-</button>
                </span>
                <input type="text" class="form-control" readonly data-bind="value: usedSpellSlots" />
                <span class="input-group-btn">
                  <button class="btn btn-primary" data-bind="click: decrUsed">+</button>
                </span>
              </div>
            </td>
            <td>
              <div data-bind='css: color' class='text-center'>&nbsp;</div>
            </td>
          <td>
            <a data-bind="click: $parent.editSlot"
               href="#"
               data-toggle="modal"
               data-target="#viewSlot">
              <i class="glyphicon glyphicon-eye-open">
              </i>
            </a>&nbsp;&nbsp;
          </td>
          <td>
            <a data-bind="click: $parent.removeSlot" href="#">
              <i class="glyphicon glyphicon-remove">
              </i>
            </a>
          </td>
          </tr>
        </tbody>
      </table>
  </div>
</div>

<!-- Add Modal -->
<div class="modal fade"
     id="addSpellSlot"
     tabindex="-1"
     role="dialog"
     aria-labelledby="addSpellSlotLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title"
            id="addSkillLabel">Add a spell slot.</h4>
    </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="name"
                   class="col-sm-2 control-label">Level</label>
            <div class="col-sm-10">
              <input type="number"
                     class="form-control"
                     id="level"
                     min="1"
                     max="9"
                     data-bind='textInput: blankSlot().level'>
            </div>
          </div>
          <div class="form-group">
            <label for="bonus"
                   class="col-sm-2 control-label">Max</label>
              <div class="col-sm-10">
                <input type="number"
                       class="form-control"
                       id="max"
                       min="1"
                       max="4"
                       data-bind='textInput: blankSlot().maxSpellSlots'>
              </div>
          </div>
           <div class="modal-footer">
            <button type="button"
                    class="btn btn-default"
                    data-dismiss="modal">Cancel</button>
            <button type="button"
                    class="btn btn-primary"
                    data-bind='click: addSlot'
                    data-dismiss="modal">Add</button>
          </div>
        </form>
      </div> <!-- Modal Body -->
    </div> <!-- Modal Content -->
  </div> <!-- Modal Dialog -->
</div> <!-- Modal Fade -->

<!-- ViewEdit Modal -->
<div data-bind="with: selecteditem">
<div class="modal fade"
     id="viewSlot"
     tabindex="-1"
     role="dialog"
     aria-labelledby="viewSlotLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title"
            id="addSlotLabel">Edit</h4>
    </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="name"
                   class="col-sm-2 control-label">Level</label>
            <div class="col-sm-10">
              <input type="number"
                     class="form-control"
                     id="name"
                     min="1"
                     max="9"
                     data-bind="value: level">
            </div>
          </div>
          <div class="form-group">
            <label for="bonus"
                   class="col-sm-2 control-label">Max</label>
              <div class="col-sm-10">
                <input type="number"
                       class="form-control"
                       id="bonus"
                       min="1"
                       max="4"
                       data-bind="value: maxSpellSlots">
              </div>
          </div>
          </div>
          <div class="modal-footer">
            <button type="button"
                    class="btn btn-primary"
                    data-dismiss="modal">Done</button>
          </div>
        </form>
      </div> <!-- Modal Body -->
    </div> <!-- Modal Content -->
  </div> <!-- Modal Dialog -->
</div> <!-- Modal Fade -->
</div> <!-- End with statement -->

